<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: helpers.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: helpers.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const {
  identity,
  isDeepVal,
  isFunction,
  isPrimative,
  isRegEx
} = require("./utils");

/**
 * &lt;h3>Between bounds&lt;/h3>
 * Return a function that checks to see if it's input is between two numbers not including the numbers.
 *
 * @param {number} a The lower number
 * @param {number} b The higher number
 * @return {function} A function of the form number => boolean
 */
const btw = (a, b) =>
  function btwFn(n) {
    return n > a &amp;&amp; n &lt; b;
  };

/**
 * &lt;h3>Between bounds or equal to&lt;/h3>
 * Return a function that checks to see if it's input is between two numbers including the numbers.
 *
 * @param {number} a The lower number
 * @param {number} b The higher number
 * @return {function} A function of the form number => boolean
 */
const btwe = (a, b) =>
  function btweFn(n) {
    return n >= a &amp;&amp; n &lt;= b;
  };

/**
 * &lt;h3>Less than&lt;/h3>
 * Return a function that checks to see if it's input is less than the given number.
 *
 * @param {number} a The number to check against.
 * @return {function} A function of the form number => boolean
 */
const lt = a =>
  function ltFn(n) {
    return n &lt; a;
  };

/**
 * &lt;h3>Less than or equal to&lt;/h3>
 * Return a function that checks to see if it's input is less than or equal to the given number.
 *
 * @param {number} a The number to check against.
 * @return {function} A function of the form number => boolean
 */
const lte = a =>
  function lteFn(n) {
    return n &lt;= a;
  };

/**
 * &lt;h3>Greater than&lt;/h3>
 * Return a function that checks to see if it's input is greater than the given number.
 *
 * @param {number} a The number to check against.
 * @return {function} A function of the form number => boolean
 */
const gt = a =>
  function gtFn(n) {
    return n > a;
  };

/**
 * &lt;h3>Greater than or equal to&lt;/h3>
 * Return a function that checks to see if it's input is greater than or equal to the given number.
 *
 * @param {number} a The number to check against.
 * @return {function} A function of the form number => boolean
 */
const gte = a =>
  function gteFn(n) {
    return n >= a;
  };

/**
 * &lt;h3>Array holds&lt;/h3>
 * Return a function that checks to see if an array contains either any of the values listed or if any of the predicate functions provided return true when run over all items in the array.
 * Eg,
 * &lt;pre>&lt;code>
 * holds(a => a > 3, 2)([1,2,3]); // true
 * holds(1, 2)([1,3]); // false
 * &lt;/code>&lt;/pre>
 *
 * @param {...function|*} args Either values or predicate functions used to test the contents of the array.
 * @return {function} A function of the form &lt;code>{array => boolean}&lt;/code>
 */
const holds = (...args) =>
  function holdsFn(n) {
    let i, j;
    let fns = [];
    let success = [];

    // prepare args as an array of predicate fns and an array to keep track of success
    for (i = 0; i &lt; args.length; i++) {
      const arg = args[i];
      const fn = typeof arg === "function" ? arg : a => a === arg;
      fns.push(fn);
      success.push(false);
    }

    // loop through array only once
    for (i = 0; i &lt; n.length; i++) {
      const item = n[i];
      for (j = 0; j &lt; fns.length; j++) {
        if (!success[j]) {
          const fn = fns[j];
          success[j] = success[j] || fn(item);
        }
      }
    }

    return success.reduce((a, b) => a &amp;&amp; b);
  };

/**
 * &lt;h3>Logical OR&lt;/h3>
 * Combine predicates to form a new predicate that ORs the result of the input predicates.
 *
 * @param {function} left The first predicate
 * @param {function} right The second predicate
 * @return {function} A function of the form &lt;code>{any => boolean}&lt;/code>
 */
const or = (left, right) =>
  function orFn(a) {
    return left(a) || right(a);
  };

/**
 * &lt;h3>Logical AND&lt;/h3>
 * Combine predicates to form a new predicate that ANDs the result of the input predicates.
 *
 * @param {function} left The first predicate
 * @param {function} right The second predicate
 * @return {function} A function of the form &lt;code>{any => boolean}&lt;/code>
 */
const and = (left, right) =>
  function andFn(a) {
    return left(a) &amp;&amp; right(a);
  };

/**
 * &lt;h3>Logical NOT&lt;/h3>
 * Takes an input predicate to form a new predicate that NOTs the result of the input predicate.
 *
 * @param {function} input The input predicate
 * @return {function} A function of the form &lt;code>{any => boolean}&lt;/code>
 */
const not = input =>
  function notFn(a) {
    return !input(a);
  };

const obj = (...entries) =>
  function objFn(a) {
    return entries.reduce(
      (acc, [key, predicate]) => acc &amp;&amp; Boolean(a) &amp;&amp; predicate(a[key]),
      true
    );
  };

/**
 * &lt;h3>Is strict equal to value&lt;/h3>
 * Takes an input value to form a predicate that checks if the input strictly equals by reference the value.
 *
 * @param {function} value The input value
 * @return {function} A function of the form &lt;code>{any => boolean}&lt;/code>
 */
const val = value =>
  function isVal(a) {
    return a === value;
  };

/**
 * &lt;h3>Is deep equal to value&lt;/h3>
 * Takes an input value to form a predicate that checks if the input deeply equals the value.
 *
 * @param {function} value The input value
 * @return {function} A function of the form &lt;code>{any => boolean}&lt;/code>
 */
const deep = value => {
  const st = JSON.stringify(value);
  return a => st === JSON.stringify(a);
};

/**
 * &lt;h3>Regular Expression predicate&lt;/h3>
 * Forms a predicate from a given regular expression
 *
 * @param {RegExp} rx The input value
 * @return {function} A function of the form &lt;code>{any => boolean}&lt;/code>
 */
const regx = rx => rx.test.bind(rx);

/**
 * &lt;h3>Primative predicate&lt;/h3>
 * Forms a predicate from a given JavaSCript primative object to act as a typeof check for the input value.
 *
 * Eg. &lt;pre>&lt;code>
 * prim(Function)(() => {}); // true
 * prim(Number)(6); // true
 * &lt;/code>&lt;/pre>
 *
 * @param {object} primative The input primative one of Array, Boolean, Number, Symbol, BigInt, String, Function, Object
 * @return {function} A function of the form &lt;code>{any => boolean}&lt;/code>
 */
const prim = primative => {
  if (primative.name === "Array") return a => Array.isArray(a);

  return a => typeof a === primative.name.toLowerCase();
};

function createExpressionParser(expression) {
  if (isFunction(expression)) {
    if (isPrimative(expression)) return prim;
    return identity;
  }
  if (isRegEx(expression)) return regx;
  if (isDeepVal(expression)) return deep;
  return val;
}

/**
 * &lt;h3>Predicate&lt;/h3>
 * Creates an appropriate predicate based on an input value. This will choose a predicate transformer dynamically based on the type of input.
 *
 * @param {*} input Anything parsable
 * @return {function} A function of the form &lt;code>{any => boolean}&lt;/code>
 */
function pred(input) {
  const expParser = createExpressionParser(input);
  return expParser(input);
}

const Email = /^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]+)$/;

module.exports = {
  Email,
  btw,
  btwe,
  lt,
  lte,
  gt,
  gte,
  holds,
  or,
  and,
  not,
  obj,
  val,
  regx,
  prim,
  pred,
  deep
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#and">and</a></li><li><a href="global.html#btw">btw</a></li><li><a href="global.html#btwe">btwe</a></li><li><a href="global.html#deep">deep</a></li><li><a href="global.html#gt">gt</a></li><li><a href="global.html#gte">gte</a></li><li><a href="global.html#holds">holds</a></li><li><a href="global.html#lt">lt</a></li><li><a href="global.html#lte">lte</a></li><li><a href="global.html#not">not</a></li><li><a href="global.html#or">or</a></li><li><a href="global.html#pred">pred</a></li><li><a href="global.html#prim">prim</a></li><li><a href="global.html#regx">regx</a></li><li><a href="global.html#val">val</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Mon Jul 22 2019 15:54:27 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
